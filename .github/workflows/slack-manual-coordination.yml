name: Manual Slack Coordination

on:
  workflow_dispatch:

jobs:
  post:
    runs-on: ubuntu-latest

    steps:
      - name: Post Slack message
        env:
          SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}
          TZ: Europe/Copenhagen
        run: |
          WEEK=$(date +"%V")
          MESSAGE="@here week ${WEEK} coordination :monday: :tuesday: :wednesday2: :thursday: :friday2:"

          curl -s -X POST https://slack.com/api/chat.postMessage \
            -H "Authorization: Bearer $SLACK_BOT_TOKEN" \
            -H "Content-Type: application/json" \
            -d "{
              \"channel\": \"#team-drupal\",
              \"text\": \"${MESSAGE}\"
            }"